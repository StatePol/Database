---
title: "Download"
---

```{r version_name_control, echo=FALSE, warning=FALSE, message=FALSE}
# data directory
data_dir <- "_data"

# define version to append
new_version <- "_1.0.0"

# regular expression to match version pattern
version_pattern <- "_[0-9]+\\.[0-9]+\\.[0-9]+"  # Matches "_1.0.0", "_2.1.3", etc.

# list all csv files
files <- list.files(data_dir, pattern = "\\.csv$", full.names = TRUE)

# loop and rename files
for (file in files) {
  # define filename
  original_name <- basename(file)
  
  # check if already contains a version
  if (grepl(version_pattern, original_name)) {
    # if yes, replace with new version
    new_name <- sub(version_pattern, new_version, original_name)
  } else {
    # if no version append 
    new_name <- sub("\\.csv$", paste0(new_version, ".csv"), original_name)
  }
  
  # define full new path
  new_full_path <- file.path(dirname(file), new_name)
  
  # rename only if the name differs 
  if (original_name != new_name) {
    if (file.rename(file, new_full_path)) {
      cat("Renamed:", original_name, "to", new_name, "\n")
    } else {
      cat("Failed to rename:", original_name, "\n")
    }
  } else {
    cat("No change needed for:", original_name, "\n")
  }
}
```

## CSV
To download the database in csv format please use this link:

* [StatePol-CSV](https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/StatePol/Database/tree/main/_data)

## R
To download the data in R, you can use the `read.csv` function from the base R library.

### Politician


```{r, eval=FALSE}
# fetch current version
database_version <- readLines(url("https://raw.githubusercontent.com/StatePol/Database/main/VERSION"))[1]

# download data
politician <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/politicians_", database_version, ".csv"))

mandate <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/mandate_", database_version, ".csv"))

ppg <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/faction_", database_version, ".csv"))

pggleadership <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/board_", database_version, ".csv"))

presidency <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/presidium_", database_version, ".csv"))

committee <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/committee_", database_version, ".csv"))

cabinet <- 
  read.csv(paste0("https://raw.githubusercontent.com/StatePol/Database/main/_data/database", "/cabinet_", database_version, ".csv"))
```

## Python 

To download the data in Python, you can use the code provided below.

```{python, eval=FALSE}
import requests
import pandas as pd

# fetch current version
version_url = "https://raw.githubusercontent.com/StatePol/Database/main/VERSION"
database_version = requests.get(version_url).text.strip()

# construct base URL
base_url = "https://raw.githubusercontent.com/StatePol/Database/main/_data/database"

# download function
def download_csv(file_name):
    csv_url = f"{base_url}/{file_name}_{database_version}.csv"
    df = pd.read_csv(csv_url)
    return df

# download data
politician = download_csv("politicians")
mandate = download_csv("mandate")
ppg = download_csv("faction")
pgg_leadership = download_csv("board")
presidency = download_csv("presidium")
committee = download_csv("committee")
cabinet = download_csv("cabinet")

# check data
politician.head()
```

## Checking the Database Version and Changelog
To ensure you are using the correct version of the StatePol database, please check the [VERSION](https://github.com/StatePol/Database/blob/main/VERSION) file in our repository for the current version number.

We recommend reviewing the [CHANGELOG](https://github.com/StatePol/Database/blob/main/CHANGELOG.md) to be aware of the changes, additions, or fixes in each version of the database.